@import ../utils/variables
@import ../utils/mixins
@import ../utils/placeholders

/*news grid*/
.news-grid
	//overflow: hidden

.news-grid--main
	max-width: 850px

.news-grid__list
	margin-bottom: $bottom-space
	+margin-horizontal(round(-$grid-space/2))
	+clear

	&:last-child
		margin-bottom: 0

.news-grid__item, .news-grid__item--large, .news-grid__item--wide
	position: relative
	font-size: $font-size-small
	line-height: $line-height-small
	letter-spacing: normal

	.news-grid &
		float: left
		margin-bottom: $grid-space

		width: $news-item-width // костыль для малекнького элемента, чтобы высоты блоков были четко по дизу
		height: $news-item-height // костыль для малекнького элемента, чтобы высоты блоков были четко по дизу
		+padding-horizontal(round($grid-space/2))

// специальные свойства для блока "Главные новости" (`.news-grid--main`)
// или специальные свойства элемета новостей с классом `.news-grid__item--no-img`
.news-grid--main .news-grid__item:nth-child(n + 4), .news-grid__item--no-img // Костыль. Все элементы начиная с четвертого должны быть без картинок и лейблов
	height: $news-item-sm-height // костыль для элемента без картинок, чтобы высоты блоков были четко по дизу

	.news__label
		display: none

	.news-grid__img
		display: none

.news-grid .news-grid__item--large
	width: $news-item-lg-width // костыль для большого элемента, чтобы высоты блоков были четко по дизу
	height: $news-item-lg-height // костыль для большого элемента, чтобы высоты блоков были четко по дизу

.news-grid__inner
	display: block
	position: relative
	text-decoration: none
	color: $text-color
	background: #fff
	box-shadow: inset 0 -3px 0 $mark-color-alt
	height: 100% // inner по высоте равен item
	overflow: hidden // необходимо для учета margin внутренних элементов !!!

.news-grid__item--has-img

	.news-grid__inner
		position: relative

		&::before
			+pseudo()
			+absolute-fill($height: $news-item-img-height) // высота как у картинки. см. выше
			background: url(../../img/no-img.jpg) no-repeat center
			background-size: cover

.news-grid__item--large

	.news-grid__inner::before
		height: $news-item-lg-img-height
// высота как у большой картинки. см. выше

.news-grid__img
	min-height: $news-label-size
	background-image: url(../../img/no-img.jpg)
	background-repeat: no-repeat
	background-position: center center
	background-size: cover
	z-index: 4

	img
		width: 100%

	.news-grid__slider + .news-grid__inner &
		display: none

.news-grid__img, .news-grid__slider
	position: relative
	height: $news-item-img-height // костыль, чтобы высоты блоков были четко по дизу
	z-index: 4

	.news-grid__item--large &
		height: $news-item-lg-img-height

	.news-grid--main &, .news-grid__item--has-img &
		position: absolute
		top: 0

.news-grid--main, .news-grid__item--has-img
	.news-grid__img
		left: 0
		width: 100%

	.news-grid__slider
		left: round($grid-space/2)
		right: round($grid-space/2)
		width: auto


.news-grid__content
	position: relative
	overflow: hidden
	padding: $grid-inside-vertical-space $grid-inside-horizontal-space 48px
	// Костыль. Нужен больше нижний отступ, чтобы повесить на абсолюте мета инфу

	.news-grid &
		// Костыль. Жесткая высота контента. Высота элемета - высота картинки
		height: $news-item-content-height

	.news-grid .news-grid__item--large &
		// Костыль. Для больших блоков своя высота контента. Высота элемета - высота картинки
		height: $news-item-lg-content-height

	.news-grid .news-grid__item:nth-child(n+4) &
		// Костыль. Для мленьких блоков своя высота контента. По дизу.
		height: $news-item-sm-content-height

	// специальные свойства для блока "Главные новости" (`.news-grid--main`)
	// или специальные свойства элемета новостей с классом `.news-grid__item--has-img`

	// 1) для первых трех элементов или с классом `.news-grid__item--has-img`
	.news-grid--main .news-grid__item:nth-child(-n+3) &, .news-grid__item--has-img &
		margin-top: $news-item-img-height // Костыль. Высота картинки

	// 2) то же самое для большого элемента
	.news-grid--main .news-grid__item--large:nth-child(-n+3) &, .news-grid__item--large.news-grid__item--has-img &
		margin-top: $news-item-lg-img-height
	// Костыль. Высота картинки для большого блока

	& > *
		z-index: 2
		position: relative

	&:before
		+pseudo()
		+absolute-fill
		background: $mark-color-alt
		transform: translate(0, 100%)
		+news-transition

	.no-touchevents a.news-grid__inner:hover &
		&:before
			transform: translate(0, 0)
			transition-duration: $animation-speed

.news-grid__title
	font-family: $font-alt
	+font(1.8rem, 1.3)
	font-weight: 700
	overflow: hidden
	height: round-float(1.8rem*1.3*2, 1) // костыль, чтобы высоты блоков были четко по дизу
	margin-bottom: 20px

.news-grid__text
	overflow: hidden
	height: round-float($font-size-small*$line-height-small*3, 1) // костыль, чтобы высоты блоков были четко по дизу

.news-grid__meta
	position: absolute
	bottom: $grid-inside-vertical-space
	width: calc(100% - #{$grid-inside-horizontal-space*2})
	font-size: 1.2rem
	line-height: 1.4
	color: $text-color-light
	+news-transition

	time
		font-style: normal

	.visit-view
		float: right

		svg path
			+news-transition


	.no-touchevents a.news-grid__inner:hover &
			color: $text-color

			svg path
				fill: $text-color
				transition-duration: $animation-speed

.news-grid__footer
	position: relative

/*news grid wide
.news-grid__item--wide
	height: 180px

	.news-grid__inner
		padding-left: 180px

		&::before
			+pseudo()
			+absolute-fill(0, 0, 180px, 180px)
			background: url(../../img/no-img.jpg) no-repeat center
			background-size: cover

	.news-grid__img
		position: absolute
		left: 0
		top: 0
		width: 180px
		height: 180px

	.news-grid__content
		height: 180px

	.news-grid__text
		overflow: hidden
		height: round-float($font-size-small*$line-height-small*4, 1) // костыль, чтобы высоты блоков были четко по дизу
		margin-bottom: 20px

/*news grid view end
/*news grid end*/