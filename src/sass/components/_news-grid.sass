@import ../utils/variables
@import ../utils/mixins
@import ../../libs/include-media/dist/include-media

/*news grid*/
.news-grid
	//overflow: hidden

.news-grid--main
	//max-width: 850px
	max-width: 1160px

.news-grid__list
	margin-bottom: -$grid-space
	+margin-horizontal(round(-$grid-space/2))
	+clear

.news-grid__item, .news-grid__item--large, .news-grid__item--wide
	position: relative
	+font($font-size-small, $line-height-small)
	letter-spacing: normal

	.news-grid &
		float: left
		margin-bottom: $grid-space

		width: $news-item-width // костыль для малекнького элемента, чтобы высоты блоков были четко по дизу
		height: $news-item-height // костыль для малекнького элемента, чтобы высоты блоков были четко по дизу
		+padding-horizontal(round($grid-space/2))

		+media('<desk-lg')
			width: 49.98%

		+media('<mob-lg')
			width: 100%

	.news-grid__slider &
		margin-bottom: 0
		+padding-horizontal(0)

	.news-simple &
		height: auto
		width: auto

// специальные свойства для блока "Главные новости" (`.news-grid--main`)
// или специальные свойства элемета новостей с классом `.news-grid__item--no-img`
.news-grid--main .news-grid__item:nth-child(n + 4), .news-grid .news-grid__item--no-img // Костыль. Все элементы начиная с четвертого должны быть без картинок и лейблов
	height: $news-item-sm-height // костыль для элемента без картинок, чтобы высоты блоков были четко по дизу

	.news__label
		display: none

	.news-grid__img
		display: none

.news-grid .news-grid__item--large
	width: $news-item-lg-width // костыль для большого элемента, чтобы высоты блоков были четко по дизу
	height: $news-item-lg-height // костыль для большого элемента, чтобы высоты блоков были четко по дизу

	+media('<desk-lg')
		width: 100%

	+media('<mob-lg')
		width: 100%
		height: auto

.news-grid__inner
	display: block
	position: relative
	text-decoration: none
	color: $text-color
	background: #fff
	box-shadow: inset 0 -3px 0 $mark-color-alt
	height: 100% // inner по высоте равен item
	overflow: hidden // необходимо для учета margin внутренних элементов !!!

	.news-simple &
		background: none
		box-shadow: none

.news-grid__item--has-img

	.news-grid__inner
		position: relative

		&::before
			+pseudo()
			+cover($position: null, $height: $news-item-img-height) // высота как у картинки. см. выше
			background: url(../../img/no-img.jpg) no-repeat center
			background-size: cover

.news-grid__item--large

	.news-grid__inner::before
		height: $news-item-lg-img-height
// высота как у большой картинки. см. выше

.news-grid__img
	min-height: $news-label-size
	background-image: url(../../img/no-img.jpg)
	background-repeat: no-repeat
	background-position: center top
	background-size: cover
	z-index: 4

	img
		width: 100%

	.news-grid__slider + .news-grid__inner &
		display: none

//.news-grid__slider,
.news-grid__img
	position: relative
	height: $news-item-img-height // костыль, чтобы высоты блоков были четко по дизу
	z-index: 4

	.news-grid__item--large &
		height: $news-item-lg-img-height

		+media('<mob-lg')
			height: $news-item-lg-img-height-mob-lg

	.news-grid--main &, .news-grid__item--has-img &
		position: absolute
		top: 0

.news-grid--main, .news-grid__item--has-img
	.news-grid__img
		left: 0
		width: 100%

	.news-grid__slider
		left: round($grid-space/2)
		right: round($grid-space/2)
		width: auto


.news-grid__content
	position: relative
	overflow: hidden
	padding: $grid-inside-vertical-space $grid-inside-horizontal-space 48px
	// Костыль. Нужен больше нижний отступ, чтобы повесить на абсолюте мета инфу

	.news-grid &
		// Костыль. Жесткая высота контента. Высота элемета - высота картинки
		height: $news-item-content-height

	.news-grid .news-grid__item--large &
		// Костыль. Для больших блоков своя высота контента. Высота элемета - высота картинки
		height: $news-item-lg-content-height

		+media('<mob-lg')
			height: auto

	.news-grid--main .news-grid__item:nth-child(n+4) &
		// Костыль. Для мленьких блоков своя высота контента. По дизу.
		height: $news-item-sm-content-height

	// специальные свойства для блока "Главные новости" (`.news-grid--main`)
	// или специальные свойства элемета новостей с классом `.news-grid__item--has-img`

	// 1) для первых трех элементов или с классом `.news-grid__item--has-img`
	.news-grid--main .news-grid__item:nth-child(-n+3) &, .news-grid .news-grid__item--has-img &
		margin-top: $news-item-img-height // Костыль. Высота картинки

	// 2) то же самое для большого элемента
	.news-grid--main .news-grid__item--large:nth-child(-n+3) &, .news-grid .news-grid__item--large.news-grid__item--has-img &
		margin-top: $news-item-lg-img-height
		// Костыль. Высота картинки для большого блока

		+media('<mob-lg')
			margin-top: $news-item-lg-img-height-mob-lg

	.news-simple &
		padding: 0
		margin-right: 10px

		&::before
			content: none

	& > *
		z-index: 2
		position: relative

	&::before
		+pseudo()
		+cover($position: null)
		background: $mark-color-alt
		transform: translate(0, 100%)
		+news-transition

	.no-touchevents a.news-grid__inner:hover &
		&::before
			transform: translate(0, 0)
			transition-duration: $animation-speed

.news-grid__title
	font-family: $font-alt
	+font(1.8rem, 1.3)
	color: inherit
	font-weight: 700
	overflow: hidden
	height: round-float(1.8rem*1.3*2, 1) // костыль, чтобы высоты блоков были четко по дизу
	margin-bottom: 20px
	transition-property: color
	transition-duration: $animation-speed

.news-grid__text
	overflow: hidden
	color: inherit
	height: round-float($font-size-small*$line-height-small*3, 1) // костыль, чтобы высоты блоков были четко по дизу
	transition-property: color
	transition-duration: $animation-speed

	+media('<mob-lg')
		margin-bottom: $bottom-space-sm

	.news-simple &
		height: auto
		margin-bottom: $bottom-space

.news-grid__meta
	position: absolute
	bottom: $grid-inside-vertical-space
	width: calc(100% - #{$grid-inside-horizontal-space*2})
	font-size: 1.2rem
	line-height: 1.4
	color: $text-color-light
	+news-transition

	time
		font-style: normal

	.visit-view
		float: right

		svg path
			transition-property: fill
			transition-duration: $animation-speed

	.no-touchevents a.news-grid__inner:hover &
		color: $text-color

		path
			fill: $text-color
			transition-duration: $animation-speed

	.news-simple &
		position: relative
		bottom: auto
		width: auto

	.visit-view > em
		transition: none

.news-grid__footer
	position: relative

/*news grid wide
.news-grid__item--wide
	height: 180px

	.news-grid__inner
		padding-left: 180px

		+media('<mob-lg')
			padding-left: 0

		&::before
			+pseudo()
			+cover(null, 0, 0, 180px, 180px)
			background: url(../../img/no-img.jpg) no-repeat center
			background-size: cover

			+media('<mob-lg')
				content: none

	.news__label
		+media('<mob-lg')
			display: none

	.news__place
		+media('<mob-lg')
			+size(30px)
			font-size: 14px
			line-height: 30px
			left: 0

	.news-grid__img
		position: absolute
		left: 0
		top: 0
		width: 180px
		height: 180px

		+media('<mob-lg')
			display: none

	.news-grid__content
		height: 180px

	.news-grid__text
		overflow: hidden
		height: round-float($font-size-small*$line-height-small*4, 1) // костыль, чтобы высоты блоков были четко по дизу
		margin-bottom: 20px

/*news grid view end
/*news grid end*/

/*others news*
.others-news

	.news-grid__list .news-grid__item

		+media('<mob-lg')
			display: none

			&:nth-child(-n+2)
				display: block

			&:nth-child(2)
				margin-bottom: 0

		&:last-child
			+media('<desk-hd')
				display: none

			+media('<desk-lg')
				display: block

			+media('<mob-lg')
				display: none

	.news-grid ~ .section__footer
		padding-top: $bottom-space

/*others news end*

/*news simple
.news-simple
	margin-bottom: $bottom-space

	&:last-child
		margin-bottom: 0

.news-simple__list
	+grid-parent()
	+clear-spacing

	.news-grid__item
		+grid-item(4)

		+media('<desk-lg')
			+grid-item(2)

		+media('<mob-md')
			+grid-item(1)

	.no-touchevents & .news-grid__inner:hover
		.news-grid__text
			color: $text-color-alt

/*news simple end

/*news footer
.news__footer
	text-align: center
	margin-bottom: $bottom-space

	&:last-child
		margin-bottom: 0

/*news footer end

/*dep-banner
.dep-banner
	height: auto

.dep-banner__inner
	display: block
	position: relative
	text-decoration: none
	color: white
	overflow: hidden
	padding: 30px
	background: #fff
	background-repeat: no-repeat
	background-size: cover
	+clear-spacing

	&::before
		content: ""
		display: inline-block
		vertical-align: middle
		height: 120px

		+media('<mob-md')
			content: none

	.gosdep-banner &
		background-color: #2d1c74
		background-image: url(../../img/bg-gosdep.jpg)

.dep-banner__img
	display: inline-block
	vertical-align: middle
	width: 120px
	height: 120px
	margin-right: 30px

	+media('<mob-md')
		display: block
		width: auto
		margin: 0 0 20px

.dep-banner__content
	display: inline-block
	vertical-align: middle
	width: calc(100% - 120px - 40px)
	letter-spacing: normal

	+media('<mob-md')
		display: block
		width: auto

.dep-banner__title
	+font-title
	+font(2.0rem, round-float(24/20, 2))
	margin-bottom: 0.6em
	
	&:last-child
		margin-bottom: 0

.dep-banner__text
	+font-title
	+font(1.4rem, round-float(24/14, 2))
	color: #b2b2ab

/*dep-banner end